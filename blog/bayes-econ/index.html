<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/katex/katex.min.css"> <link rel=stylesheet  href="/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/hypertext.css"> <link rel=icon  href="/assets/favicon.png"> <title>Bayesian econometrics</title> <header> <nav> <a href="/">cameron pfiffer</a> ∘ <a href="/">about</a> ∘ <a href="/blog/">blog</a> ∘ <a href="/links/">links</a> <hr/> </nav> </header> <div class=franklin-content > <h1 id=introduction ><a href="#introduction" class=header-anchor >Introduction</a></h1> <p>Since I&#39;m in social distancing mode, I figured it would be a good time to write a blog post on Bayesian methods and financial economics. I have written a post in quite a while, as the past year and a half or so have been a busy time for me. The finance PhD takes up most of my time, as well as my work on <a href="https://turing.ml">Turing.jl</a>, a <a href="https://en.wikipedia.org/wiki/Probabilistic_programming">probabilistic programming language</a> &#40;PPL&#41; for Julia. </p> <p>Before I continue, I want to make sure people understand my perspective. I do not work in fields of economics that people tend to think of when they think of economics – maybe you think of labor, health, or macroeconomics, all of which are valuable fields that I know very little about. I study finance, which is the study of how money and securities are used and what they do to the economy. Keep that in mind as we go along. I&#39;m in a smaller subfield of economics that shares many of the same methodologies and language, but is applied to the theory of the firm and to asset prices.</p> <p>Back to Turing.jl. Everyone who works on Turing is of an extremely high quality level. They are all typically very skilled in their respective computational or statistical domains, and it is easy to feel a little out of place. I am not an optimization person, or a machine learning person, or even really anyone with any measure of formal engineering training<sup id="fnref:training"><a href="#fndef:training" class=fnref >[1]</a></sup>.</p> <p><table class=fndef  id="fndef:training"> <tr> <td class=fndef-backref ><a href="#fnref:training">[1]</a> <td class=fndef-content >I do have industry experience, but it&#39;s not a perfect substitute. It helps a lot to have thought about all the little fiddly bits that go into Turing. </table> I am, however, a financial economist &#40;with training wheels&#41;. Working on Turing and spending a lot of time with CS and statistics people who are not economists has been particularly eye-opening, because economics is a unique field that I think tends to stand out in the sciences. Here&#39;s why:</p> <h2 id=ground_truth ><a href="#ground_truth" class=header-anchor >Ground truth</a></h2> <p>As with all social sciences, <strong>ground truth is hard to come by</strong>. In any of the hard sciences like physics, you can hypothesize something, and then sometimes you can spend hundred of millions of dollars to see if it is true. In economics, we don&#39;t really have this. You can&#39;t run experiments where you make half of all pregnant mothers smoke to see what happens to their kids, or randomly assign particular directors to company boards. </p> <h2 id=causal_inference ><a href="#causal_inference" class=header-anchor >Causal inference</a></h2> <p><strong>Causal inference is the name of the game</strong>. Economics is about how thing A causes thing B to change. The field has built up an enormous set of statistical tools just to identify whether and how a thing is causal, and many of these tools are commonly only used in social sciences<sup id="fnref:iv"><a href="#fndef:iv" class=fnref >[2]</a></sup>.</p> <table class=fndef  id="fndef:iv"> <tr> <td class=fndef-backref ><a href="#fnref:iv">[2]</a> <td class=fndef-content >Do physics people use <a href="https://en.wikipedia.org/wiki/Instrumental_variables_estimation">instrumental variables</a>? </table> <h2 id=economists_love_math ><a href="#economists_love_math" class=header-anchor >Economists love math</a></h2> <p><strong>Economics is mathematical</strong>. Because economists don&#39;t have ground truth, they build models of behavior and attempt to match empirical facts to what theory suggests should exist. Economists tend to bash other social scientists &#40;especially sociology, sorry folks&#41; because their methods are less sophisticated. Economists even bash financial economists like me, because we tend to be 5-10 years behind economics writ-large in terms of empirical and theoretical methodologies. </p> <h1 id=bayesian_methods_and_economics ><a href="#bayesian_methods_and_economics" class=header-anchor >Bayesian methods and economics</a></h1> <p>I&#39;m going to talk about how I think Bayesian methods are being used currently in financial economics, why I think Bayesian methods should be used more in empirical economics. I also want to pitch Turing.jl as a way for researchers to do more of this, if only because it is very easy to do so.</p> <p>I mentioned before that economics does not have ground truth. There will never be a point when a researcher can be confident that their model is 100&#37; correct, or that their parameter estiamtes are accurate. It&#39;s just not possible – economics is the science of choices by people. People are made up of angry goop and they can behave irrationally at times, so a deterministic model is pretty hard to specify. </p> <p>That&#39;s why economists use standard errors, and think so hard about whether their model is free from material omitted bias, heteroskedasticity, etc. Standard errors in OLS &#40;or whatever your method is&#41; give you a good proxy for the variance of your estimator, assuming that estimator is normal. </p> <p>Economists have many ways to think about standard errors and causal inference – do your errors have some kind of autocorrelation? What if clusters of observation share some common error? Does the instrument you are using satisfy the necessary requirements? These kinds of questions are where economics shines the brightest. Because there is no ground truth, you want to be as confident as you can when you say something.</p> <h2 id=bayesian_methods ><a href="#bayesian_methods" class=header-anchor >Bayesian methods</a></h2> <p>What does any of this have to do with Bayesian methods? Well, my biggest issue with contemporary econometrics is the use of priors. Every single time someone runs a regression with <code>lm&#40;y ~ x, data&#41;</code> or <code>reg y x</code>, they are doing a very specific thing. OLS is simply the <a href="https://en.wikipedia.org/wiki/Maximum_a_posteriori_estimation">maximum a posteriori</a> estimate of the model&#39;s parameters with a flat prior everywhere, also called <a href="https://en.wikipedia.org/wiki/Maximum_likelihood_estimation">maximum likelihood</a>. By doing this, you let the data speak for you, which I am generally in favor of. </p> <p>But sometimes priors matter&#33; When you have small datasets or multiple posterior modes, sometimes priors can get your estimates to where you think is reasonable &#40;conditional on a good prior&#41;. </p> <p>It&#39;s not like economists have a shortage of priors, either. Good papers are either backed by good theory or show intuitive relationships that don&#39;t need a formal theoretical link, and in all cases you can typically say something like </p> <blockquote> <p>If the relationships in Person &#40;2030&#41; hold, then <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\alpha &gt; 1</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >&gt;</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.6444em;"></span><span class=mord >1</span></span></span></span>.</p> </blockquote> <p>Sounds like a prior to me. You can use theoretical predictions to motivate priors when you&#39;re writing models.</p> <h2 id=the_state_of_bayesian_methods_in_finance ><a href="#the_state_of_bayesian_methods_in_finance" class=header-anchor >The state of Bayesian methods in finance</a></h2> <p>My perception is that Bayesian methods are still somewhat fringe, but that they have a slight but regular appearance in finance. I went to our top journal, the <a href="https://afajof.org/">Journal of Finance</a>, and searched for the word &quot;bayesian&quot;. I grabbed any of the papers that are not pure theory. Here&#39;s a list of papers that turned up:</p> <ul> <li><p>Cavagnaro et al. &#40;2019&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/jofi.12783">Measuring Institutional Investors’ Skill at Making Private Equity Investments</a>.</p> <li><p>Pástor &#40;2000&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/0022-1082.00204">Portfolio Selection and Asset Pricing Models</a>.</p> <li><p>Pástor and Stambaugh &#40;1999&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/0022-1082.00099">Costs of Equity Capital and Model Mispricing</a>.</p> <li><p>Johannes, Lochstoer, and Mou &#40;2016&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/jofi.12246">Learning About Consumption Dynamics</a>.</p> <li><p>Lamoureux and Witte &#40;2002&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/1540-6261.00467">Empirical Analysis of the Yield Curve: The Information in the Data Viewed through the Window of Cox, Ingersoll, and Ross</a>.</p> <li><p>Kandel and Stambaugh &#40;1996&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/j.1540-6261.1996.tb02689.x">On the Predictability of Stock Returns: An Asset‐Allocation Perspective</a>.</p> <li><p>Barillas and Shanken &#40;2018&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/jofi.12607">Comparing Asset Pricing Models</a>. </p> <li><p>Rouwenhorst &#40;1999&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/0022-1082.00151">Local Return Factors and Turnover in Emerging Stock Markets</a>.</p> <li><p>Brav &#40;2000&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/0022-1082.00279">Inference in Long‐Horizon Event Studies: A Bayesian Approach with Application to Initial Public Offerings</a>.</p> <li><p>Baks, Metrick, and Wachter &#40;2001&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/0022-1082.00319">Should Investors Avoid All Actively Managed Mutual Funds? A Study in Bayesian Performance Evaluation</a>.</p> <li><p>Busse and Irvine &#40;2006&#41;. <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/j.1540-6261.2006.01057.x">Bayesian Alphas and Mutual Fund Persistence</a>.</p> </ul> <p>Many of these papers use explicitly derived analytic forms, explicit Gibbs conditionals, or very basic MCMC models. Very few of these models are non-linear models, and in most cases they tend to be regular frequentist econometrics with the addition of a density function. </p> <h1 id=whats_cool ><a href="#whats_cool" class=header-anchor >What&#39;s cool</a></h1> <p>My favorite papers apply Bayesian methods in a more interesting way. One example is <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/jofi.12607">Barillas and Shanken &#40;2018&#41;</a>, who use a closed form solution to analyze the efficacy of various factor models. I like this paper quite a lot, but I think that researchers tend to work really hard to derive closed form solutions when they are not really ncessary. For example, <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/jofi.12854">Chib, Zeng, and Zhao &#40;2020&#41;</a> attempted to replicate Barillas and Shanken, and noticed that the use of a Jeffrey&#39;s prior on nuisance parameters makes the closed form solution unsound. </p> <p>You can avoid this by just numerically solving your model. I believe that we should start thinking more and more computationally as our models become more complex, and Markov Chain Monte Carlo lets you do this. Importantly, this is easier now that ever. It&#39;s not 2002 anymore and you don&#39;t have to roll your own Gibbs sampler every time you need to solve some model. You can just use a probabilistic programming language like Turing<sup id="fnref:book"><a href="#fndef:book" class=fnref >[3]</a></sup>&#33;</p> <p><table class=fndef  id="fndef:book"> <tr> <td class=fndef-backref ><a href="#fnref:book">[3]</a> <td class=fndef-content >Some other good PPLs are <a href="https://mc-stan.org/">Stan</a>, <a href="https://github.com/cscherrer/Soss.jl">Soss.jl</a>, <a href="https://docs.pymc.io/">PyMC</a>, and <a href="http://pyro.ai/">Pyro</a>, among many others. </table> Don&#39;t get me wrong – I love theory as much as the next person. Theory is good for telling stories, whereas empirics are good for proving those stories. Or theory is getting more and more complex, and our empirics should rise to meet the challenge. Additionally, I think where Bayesian methods are concerned, people try to mix theory and empirics too closely, and they end up looking for closed form solutions where there are none.</p> <p>I want to present a rough sketch of how I think about this, and how I&#39;d do it computationally. Assume that there are <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> factor models, each of which returns an expected return from a function <code>r&#40;m, t, x&#41;</code> for factor model index <code>m</code>, time <code>t</code>, and observable data <code>x</code>. Assume <code>x</code> is a matrix of returns and factors for one security. One nice way to do this in Turing is</p> <pre><code class="julia hljs"><span class=hljs-comment ># Import Turing</span>
<span class=hljs-keyword >using</span> Turing

<span class=hljs-comment >#</span>
<span class=hljs-comment ># Declare our probabilistic model.</span>
<span class=hljs-comment ># - models is a vector of functions, r(n, t, x), that return an expected return.</span>
<span class=hljs-comment ># - data is a matrix with returns in the first column, and factors in the remaining columns.</span>
<span class=hljs-comment ># </span>
<span class=hljs-meta >@model</span> factors(models, data) = <span class=hljs-keyword >begin</span>
    <span class=hljs-comment ># Choose which model is &quot;true&quot;, all models have equal priors.</span>
    m ~ Categorical(length(models))

    <span class=hljs-comment ># Draw a variance parameter.</span>
    σ ~ InverseGamma(<span class=hljs-number >2</span>,<span class=hljs-number >3</span>)

    <span class=hljs-comment ># Estimate each return.</span>
    r_hat = r.(m, <span class=hljs-number >1</span>:size(data, <span class=hljs-number >1</span>), data)

    <span class=hljs-comment ># Check the model&#x27;s predictions:</span>
    data[:, <span class=hljs-number >1</span>] ~ MvNormal(r_hat, σ)
<span class=hljs-keyword >end</span></code></pre> <p>And you&#39;re done&#33; You can run this on whatever sampling method you want, and it&#39;ll give you posterior probabilities for models. As valuable as raw math is, sometimes it&#39;s nice to just type the model up and see what the data says, assuming you&#39;ve thought about all the econometric issues as you normally would.</p> <h1 id=hopes ><a href="#hopes" class=header-anchor >Hopes</a></h1> <p>In this section, I want to talk about some things I want to see more of going forward.</p> <h2 id=structural_estimation ><a href="#structural_estimation" class=header-anchor >Structural estimation</a></h2> <p>Structural estimation is a really beautiful tool. When you structurally estimate something, you marry theory and empirics to determine the effect of some parameter. For the most part, it is done in a frequentist way by matching moments between simulated data and empirical data. You can do structural estimation in a Bayesian way by specifying a very general probabilistic model and then running it through your PPL of choice. Not only does this give you parameter estimates, but it also tells you how uncertain you are of those estimates. You might even learn that your parameterizations are multimodal, and that there are numerous nontrivial outcomes in your model that a simulated method of moments estimation might miss.</p> <h2 id=prior_sensitivity ><a href="#prior_sensitivity" class=header-anchor >Prior sensitivity</a></h2> <p>Bayesian methods let you test how realistic something is. I read a cool working paper a little while ago called <a href="https://sites.google.com/site/lalochstoer/VolUnderreactionMain.pdf?attredirects&#61;0&amp;d&#61;1">Volatility Expectations and Returns</a> by Lars Lochstoer and Tyler Muir. They propose a novel behavioral explanation of some weird patterns in the VIX, realized volatility, returns, and the variance risk premium. Essentially, if investors use too much of past variance to form their expectations about current variance, you can explain many strange effects in markets. </p> <p>The problem with behavioral papers is that they don&#39;t quite site right with finance folks, because it&#39;s very easy to say that some arbitrageur should have removed this anomaly. Rob Ready &#40;here at the University of Oregon&#41; asked how strong your priors would have to be on using old observations of variance for this effect to matter, and we can test this&#33; Build a model of stoachastic volatility and conditional expectations, and you should be able to fiddle with your model priors until something cool comes out.</p> <h2 id=latent_variables ><a href="#latent_variables" class=header-anchor >Latent variables</a></h2> <p>Bayesian methods are interesting when you apply them to inferring latent variables. In finance, these might be things like managerial skill, expected return, volatility, etc. We&#39;ve got all kinds of things we don&#39;t directly observe but have models to explain how they interact when other stuff. When you know that X goes up when Y does, you can start to run inference on the relationships between X and Y even when you can&#39;t observe Y, though as always, it helps to have lots of data.</p> <h1 id=conclusion ><a href="#conclusion" class=header-anchor >Conclusion</a></h1> <p>This was a bit of a rambling post, but I&#39;m trying to get some thoughts on paper. What a time to be alive.</p> <div class=page-foot > Cameron Pfiffer. Last modified: March 28, 2024. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> <script src="/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script>