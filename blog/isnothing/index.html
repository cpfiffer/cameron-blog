<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,400;0,500;1,400;1,500&display=swap"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&display=swap"
            rel="stylesheet"
        />
         
        <link rel="stylesheet" href="/libs/highlight/styles/github.min.css">
   <link rel="stylesheet" href="/css/normalize.css" />
<link rel="stylesheet" href="/css/franklin.css" />
<link rel="stylesheet" href="/css/hypertext.css" />
<link rel="icon" href="/assets/favicon.png" />

<!-- Favicon -->
<link
    rel="apple-touch-icon"
    sizes="180x180"
    href="/assets/apple-touch-icon.png"
/>
<link
    rel="icon"
    type="image/png"
    sizes="32x32"
    href="/assets/favicon-32x32.png"
/>
<link
    rel="icon"
    type="image/png"
    sizes="16x16"
    href="/assets/favicon-16x16.png"
/>
<link rel="manifest" href="/assets/site.webmanifest" />
 
        <title>Nothingness in Julia</title>
        
    </head>
    <body>
        <div class="center-column-holder">
            <div class="center-column">
                <header>
    <div class="header-nav">
        <span style="font-weight: bold">Cameron Pfiffer</span>
        <div>
            <a href="/">about</a> âˆ˜ <a href="/blog/">blog</a> âˆ˜
            <a href="/links/">links</a>
        </div>
    </div>
    <hr />
</header>

                <!-- Content appended here -->
                <button id="theme-toggle" aria-label="Toggle dark mode">
                    ğŸŒ™
                </button>
            </div>
        </div>
        <style>
            #theme-toggle {
                position: fixed;
                top: 1rem;
                right: 1rem;
                padding: 0.5rem;
                font-size: 1.25rem;
                border: none;
                background: none;
                cursor: pointer;
                z-index: 1000;
            }
        </style>
        <script>
            // Check for saved theme preference, otherwise use system preference
            const getPreferredTheme = () => {
                const savedTheme = localStorage.getItem("theme");
                if (savedTheme) {
                    return savedTheme;
                }
                return window.matchMedia("(prefers-color-scheme: dark)").matches
                    ? "dark"
                    : "light";
            };

            // Apply theme
            const setTheme = (theme) => {
                document.documentElement.setAttribute("data-theme", theme);
                localStorage.setItem("theme", theme);
                // Update button text
                document.getElementById("theme-toggle").innerText =
                    theme === "dark" ? "â˜¼" : "â˜¾";
            };

            // Initialize theme
            setTheme(getPreferredTheme());

            // Add toggle functionality
            document
                .getElementById("theme-toggle")
                .addEventListener("click", () => {
                    const currentTheme =
                        document.documentElement.getAttribute("data-theme");
                    setTheme(currentTheme === "dark" ? "light" : "dark");
                });

            // Listen for system theme changes
            window
                .matchMedia("(prefers-color-scheme: dark)")
                .addEventListener("change", (e) => {
                    if (!localStorage.getItem("theme")) {
                        setTheme(e.matches ? "dark" : "light");
                    }
                });
        </script>
    </body>
</html>
<div class="franklin-content">
<p>If you ever work in Julia, something you&#39;ll notice is that lots of people and the language server will recommend that you use <code>isnothing&#40;x&#41;</code> or <code>x &#61;&#61;&#61; nothing</code> instead of the value comparison <code>x &#61;&#61; nothing</code>. This is also true of the <code>ismissing</code> functionality for missing values.</p>
<p>Good discussion <a href="https://discourse.julialang.org/t/x-nothing-vs-x-isa-nothing/64546/13">here</a>, and a great Stack Overflow answer <a href="https://stackoverflow.com/a/38638838/6149469">here</a>.</p>
<p>How meaningful is this, though? I decided to do some benchmarking to see how much of a difference this makes.</p>
<p>The TLDR is that <code>x &#61;&#61; nothing</code> isn&#39;t specialized to checking <code>nothing</code>, whereas <code>isnothing</code> and <code>x &#61;&#61;&#61; nothing</code> are. <code>x &#61;&#61;&#61; nothing</code> is a core language feature &#40;I believe&#41; and <code>isnothing</code> is compile time dispatched and is thus relatively quick. <code>x &#61;&#61; nothing</code> is a value comparison and I think requires some extra stuff to happen on top.</p>
<p>There&#39;s a speed component to this too â€“ <code>isnothing</code> is the fastest on my machine, <code>x &#61;&#61;&#61; nothing</code> is the second fastest, and <code>x &#61;&#61; nothing</code> is the slowest.</p>
<p><code>isnothing</code>:</p>
<pre><code class="language-julia">julia&gt; @benchmark isnothing&#40;x&#41;
BenchmarkTools.Trial: 10000 samples with 1000 evaluations.
 Range &#40;min â€¦ max&#41;:  1.539 ns â€¦ 24.880 ns  â”Š GC &#40;min â€¦ max&#41;: 0.00&#37; â€¦ 0.00&#37;
 Time  &#40;median&#41;:     1.579 ns              â”Š GC &#40;median&#41;:    0.00&#37;
 Time  &#40;mean Â± Ïƒ&#41;:   1.589 ns Â±  0.269 ns  â”Š GC &#40;mean Â± Ïƒ&#41;:  0.00&#37; Â± 0.00&#37;

   â–â–ƒâ–          â–ˆâ–ˆ
  â–ƒâ–ˆâ–ˆâ–ˆâ–„â–ƒâ–‚â–‚â–‚â–‚â–‚â–‚â–‚â–ˆâ–ˆâ–ˆâ–‡â–†â–ƒâ–‚â–‚â–‚â–‚â–â–â–‚â–ƒâ–…â–…â–ƒâ–ƒâ–‚â–‚â–‚â–‚â–‚â–â–â–â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–â–â–â–â–â–‚â–‚â–‚â–‚â–‚â–‚ â–ƒ
  1.54 ns        Histogram: frequency by time         1.7 ns &lt;

 Memory estimate: 0 bytes, allocs estimate: 0.</code></pre>
<p><code>x &#61;&#61;&#61; nothing</code>:</p>
<pre><code class="language-julia">julia&gt; @benchmark x &#61;&#61;&#61; nothing
BenchmarkTools.Trial: 10000 samples with 1000 evaluations.
 Range &#40;min â€¦ max&#41;:  1.755 ns â€¦ 5.381 ns  â”Š GC &#40;min â€¦ max&#41;: 0.00&#37; â€¦ 0.00&#37;
 Time  &#40;median&#41;:     1.772 ns             â”Š GC &#40;median&#41;:    0.00&#37;
 Time  &#40;mean Â± Ïƒ&#41;:   1.791 ns Â± 0.102 ns  â”Š GC &#40;mean Â± Ïƒ&#41;:  0.00&#37; Â± 0.00&#37;

             â–ˆâ–ƒâ–„â–ƒâ–
  â–‚â–‚â–‚â–‚â–‚â–‚â–ƒâ–ƒâ–„â–†â–‡â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–†â–…â–„â–ƒâ–‚â–‚â–â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–â–â–â–â–â–â–‚â–‚â–‚â–‚â–‚â–‚â–ƒâ–ƒâ–‡â–…â–†â–‡â–‡â–‡â–†â–†â–„â–„â–ƒâ–ƒ â–ƒ
  1.76 ns        Histogram: frequency by time       1.82 ns &lt;

 Memory estimate: 0 bytes, allocs estimate: 0.</code></pre>
<p>The bad one, <code>x &#61;&#61; nothing</code>:</p>
<pre><code class="language-julia">julia&gt; @benchmark x &#61;&#61; nothing
BenchmarkTools.Trial: 10000 samples with 1000 evaluations.
 Range &#40;min â€¦ max&#41;:  2.419 ns â€¦ 10.722 ns  â”Š GC &#40;min â€¦ max&#41;: 0.00&#37; â€¦ 0.00&#37;
 Time  &#40;median&#41;:     2.681 ns              â”Š GC &#40;median&#41;:    0.00&#37;
 Time  &#40;mean Â± Ïƒ&#41;:   2.693 ns Â±  0.235 ns  â”Š GC &#40;mean Â± Ïƒ&#41;:  0.00&#37; Â± 0.00&#37;

    â–ˆ       â–‚          â–â–      â–…â–„    â–
  â–‚â–„â–ˆâ–‚â–â–…â–„â–ƒâ–â–†â–ˆâ–ˆâ–‚â–â–…â–‡â–…â–â–‚â–„â–…â–ˆâ–ˆâ–‚â–…â–†â–‚â–â–…â–ˆâ–ˆâ–‚â–â–‚â–ˆâ–ˆâ–ƒâ–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–â–â–‚â–„â–ƒâ–â–â–â–‚â–ƒâ–‚â–â– â–ƒ
  2.42 ns        Histogram: frequency by time        3.11 ns &lt;

 Memory estimate: 0 bytes, allocs estimate: 0.</code></pre>
<p>This is usually why the language server will recommend that you use <code>isnothing</code> or <code>x &#61;&#61;&#61; nothing</code> instead.</p>
<h2 id="missing_values"><a href="#missing_values" class="header-anchor">Missing values</a></h2>
<p>The same is generally true of missing values. Missing values <a href="https://docs.julialang.org/en/v1/manual/faq/#faq-nothing">differ from <code>nothing</code></a> in that they are used to represent missing data â€“ <code>nothing</code> is returned by default when a return value is not otherwise specified. <code>missing</code> is more for cases where you don&#39;t know a value, e.g. if you don&#39;t have data for an observation in a statistical model.</p>
<p>Interestingly, on Julia 1.10.2, the fastest is not one of the strict comparisons <code>x &#61;&#61;&#61; missing</code> or <code>ismissing&#40;x&#41;</code>, but a raw comparison using <code>&#61;&#61;</code>. Not really sure what&#39;s up with that, but whatever.</p>
<pre><code class="language-julia">julia&gt; @benchmark x &#61;&#61; missing
BenchmarkTools.Trial: 10000 samples with 1000 evaluations.
 Range &#40;min â€¦ max&#41;:  0.883 ns â€¦ 7.668 ns  â”Š GC &#40;min â€¦ max&#41;: 0.00&#37; â€¦ 0.00&#37;
 Time  &#40;median&#41;:     0.890 ns             â”Š GC &#40;median&#41;:    0.00&#37;
 Time  &#40;mean Â± Ïƒ&#41;:   0.896 ns Â± 0.107 ns  â”Š GC &#40;mean Â± Ïƒ&#41;:  0.00&#37; Â± 0.00&#37;

         â– â–‡ â–ˆâ–ˆ â–… â–‚
  â–‚â–‚â–â–„â–â–†â–â–ˆâ–â–ˆâ–â–ˆâ–ˆâ–â–ˆâ–â–ˆâ–â–‡â–â–†â–â–…â–„â–â–„â–â–ƒâ–â–ƒâ–â–ƒâ–â–ƒâ–ƒâ–â–ƒâ–â–ƒâ–â–‚â–â–‚â–â–‚â–‚â–â–‚â–â–‚â–â–‚â–â–‚â–â–‚â–‚ â–ƒ
  0.883 ns       Histogram: frequency by time      0.914 ns &lt;

 Memory estimate: 0 bytes, allocs estimate: 0.</code></pre>
<pre><code class="language-julia">julia&gt; @benchmark ismissing&#40;x&#41;
BenchmarkTools.Trial: 10000 samples with 1000 evaluations.
 Range &#40;min â€¦ max&#41;:  1.757 ns â€¦ 5.822 ns  â”Š GC &#40;min â€¦ max&#41;: 0.00&#37; â€¦ 0.00&#37;
 Time  &#40;median&#41;:     1.776 ns             â”Š GC &#40;median&#41;:    0.00&#37;
 Time  &#40;mean Â± Ïƒ&#41;:   1.783 ns Â± 0.088 ns  â”Š GC &#40;mean Â± Ïƒ&#41;:  0.00&#37; Â± 0.00&#37;

           â–â–â–‚â–ˆ    â–‚â–ˆâ–â–â–â–
  â–‚â–‚â–‚â–‚â–‚â–ƒâ–†â–†â–‡â–ˆâ–ˆâ–ˆâ–ˆâ–‡â–†â–…â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–…â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–‚â–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒ â–ƒ
  1.76 ns        Histogram: frequency by time       1.82 ns &lt;

 Memory estimate: 0 bytes, allocs estimate: 0.</code></pre>
<pre><code class="language-julia">julia&gt; @benchmark x &#61;&#61;&#61; missing
BenchmarkTools.Trial: 10000 samples with 1000 evaluations.
 Range &#40;min â€¦ max&#41;:  1.540 ns â€¦ 4.822 ns  â”Š GC &#40;min â€¦ max&#41;: 0.00&#37; â€¦ 0.00&#37;
 Time  &#40;median&#41;:     1.554 ns             â”Š GC &#40;median&#41;:    0.00&#37;
 Time  &#40;mean Â± Ïƒ&#41;:   1.561 ns Â± 0.081 ns  â”Š GC &#40;mean Â± Ïƒ&#41;:  0.00&#37; Â± 0.00&#37;

           â–‚â–ƒâ–„â–…â–‡â–‡â–ˆâ–‡â–…â–„ â–ƒ
  â–‚â–‚â–‚â–ƒâ–„â–…â–…â–‡â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–ˆâ–‡â–…â–ƒâ–ƒâ–‚â–‚â–‚â–‚â–‚â–â–â–â–â–â–â–â–â–â–‚â–‚â–‚â–‚â–‚â–ƒâ–‚â–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒ â–„
  1.54 ns        Histogram: frequency by time       1.59 ns &lt;

 Memory estimate: 0 bytes, allocs estimate: 0.</code></pre>
<div class="page-foot">
  Website built with
  <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the
  <a href="https://julialang.org">Julia programming language</a>.
</div>
</div><!-- CONTENT ENDS HERE -->

</div> <!-- end of center-column -->
</div> <!-- end of center-column-holder -->
    
    
        <script src="/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>

    
    
  </body>
</html>
